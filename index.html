<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manicure PRO</title>

<link rel="manifest" href="manifest.json">

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
overflow-x:hidden;
}

/* ================= FONDO ANIMADO ================= */
.auth-container{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:linear-gradient(135deg,#fce7f3,#fbcfe8,#f9a8d4);
position:relative;
overflow:hidden;
}

/* Burbujas */
.bubble{
position:absolute;
bottom:-100px;
background:rgba(255,255,255,0.3);
border-radius:50%;
animation:float 12s infinite ease-in;
}

@keyframes float{
0%{transform:translateY(0) scale(1);}
100%{transform:translateY(-110vh) scale(1.2);}
}

/* ================= CARD ================= */

.auth-card{
background:white;
padding:40px;
border-radius:30px;
box-shadow:0 25px 50px rgba(0,0,0,0.2);
width:360px;
z-index:2;
animation:iphoneIn 0.6s ease;
}

@keyframes iphoneIn{
0%{opacity:0; transform:translateY(40px);}
100%{opacity:1; transform:translateY(0);}
}

.logo{
text-align:center;
margin-bottom:20px;
}

.logo h1{
margin:0;
color:#ec4899;
}

.logo p{
margin:5px 0 0;
color:#777;
font-size:14px;
}

/* IlustraciÃ³n elegante */
.illustration{
font-size:60px;
text-align:center;
margin-bottom:15px;
}

/* Tabs */
.tabs{
display:flex;
margin-bottom:20px;
}

.tabs button{
flex:1;
background:none;
border:none;
font-weight:bold;
padding:8px;
color:#aaa;
cursor:pointer;
}

.tabs button.active{
color:#ec4899;
border-bottom:3px solid #ec4899;
}

input{
width:100%;
padding:10px;
margin-bottom:10px;
border-radius:10px;
border:1px solid #ddd;
}

.btn-main{
width:100%;
padding:10px;
border:none;
border-radius:12px;
background:#ec4899;
color:white;
font-weight:bold;
cursor:pointer;
margin-bottom:8px;
transition:0.2s;
}

.btn-main:hover{background:#db2777;}
.btn-main:active{transform:scale(0.95);}

.guest{
background:#f3f4f6;
color:#444;
}

.hidden{display:none;}

/* ================= APP ================= */

.header{
background:#ec4899;
color:white;
padding:20px;
text-align:center;
animation:iphoneIn 0.5s ease;
}

.container{
max-width:1000px;
margin:auto;
padding:20px;
animation:iphoneIn 0.6s ease;
}

.card{
background:white;
padding:20px;
border-radius:20px;
box-shadow:0 10px 25px rgba(0,0,0,0.1);
margin-bottom:20px;
}

.calendar{
display:grid;
grid-template-columns:repeat(7,1fr);
gap:8px;
}

.day{
padding:12px;
border-radius:10px;
text-align:center;
font-weight:bold;
cursor:pointer;
background:#fce7f3;
}

.day:hover{background:#f9a8d4;}

.horas{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:6px;
margin-top:10px;
}

button.small{
padding:6px;
border-radius:8px;
border:none;
background:#fbcfe8;
cursor:pointer;
}

.admin-delete{background:#ef4444;color:white;}

.stat-box{
background:#fdf2f8;
padding:10px;
border-radius:10px;
margin-bottom:8px;
}

</style>
</head>

<body>

<!-- ================= AUTH ================= -->
<div id="authView" class="auth-container">

<!-- Burbujas -->
<script>
for(let i=0;i<15;i++){
let bubble=document.createElement("div");
bubble.className="bubble";
bubble.style.left=Math.random()*100+"%";
bubble.style.width=bubble.style.height=(20+Math.random()*60)+"px";
bubble.style.animationDuration=(8+Math.random()*10)+"s";
document.body.appendChild(bubble);
}
</script>

<div class="auth-card">

<div class="illustration">ðŸ’…âœ¨</div>

<div class="logo">
<h1>Manicures PRO</h1>
<p>Demo Profesional de Agenda</p>
</div>

<div class="tabs">
<button id="btnLogin" class="active" onclick="mostrarLogin()">Ingresar</button>
<button id="btnRegistro" onclick="mostrarRegistro()">Crear Cuenta</button>
</div>

<div id="loginForm">
<input type="text" id="usuario" placeholder="Usuario">
<input type="password" id="clave" placeholder="ContraseÃ±a">
<button class="btn-main" onclick="login()">Ingresar</button>
<button class="btn-main guest" onclick="entrarInvitado()">Continuar como invitado</button>
<p style="font-size:12px;text-align:center;color:#777;">
</p>
</div>

<div id="registroForm" class="hidden">
<input type="text" id="nuevoUsuario" placeholder="Nombre completo">
<input type="password" id="nuevaClave" placeholder="ContraseÃ±a">
<button class="btn-main" onclick="registrar()">Crear Cuenta</button>
</div>

</div>
</div>

<!-- ================= APP ================= -->
<div id="appView" class="hidden">

<div class="header">
<h2>manicures PRO Studio</h2>
<p id="saludo"></p>
<button onclick="logout()" style="margin-top:10px;background:white;color:#ec4899;">Cerrar sesiÃ³n</button>
</div>

<div class="container">

<div class="card">
<h3 id="mesActual"></h3>
<div class="calendar" id="calendar"></div>
</div>

<div id="clientePanel" class="card hidden"></div>

<div id="adminPanel" class="card hidden">
<h3>Panel Administrador</h3>
<div id="estadisticas"></div>
<button onclick="exportarPDF()">Exportar PDF</button>
<ul id="listaAdmin"></ul>
</div>

</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>

/* ======= DATA ======= */
let usuarios=JSON.parse(localStorage.getItem("usuarios"))||[
{usuario:"admin",clave:"1234",rol:"admin"}
];

let reservas=JSON.parse(localStorage.getItem("reservas"))||[];
let sesion=JSON.parse(localStorage.getItem("sesion"));
let fechaActual=new Date();
let precioBase=15000;

/* ======= AUTO LOGIN ======= */
if(sesion){
mostrarApp();
}

/* ======= AUTH ======= */
function mostrarLogin(){
loginForm.classList.remove("hidden");
registroForm.classList.add("hidden");
btnLogin.classList.add("active");
btnRegistro.classList.remove("active");
}

function mostrarRegistro(){
registroForm.classList.remove("hidden");
loginForm.classList.add("hidden");
btnRegistro.classList.add("active");
btnLogin.classList.remove("active");
}

function registrar(){
let usuario=nuevoUsuario.value;
let clave=nuevaClave.value;
if(!usuario||!clave)return alert("Completa datos");
usuarios.push({usuario,clave,rol:"cliente"});
localStorage.setItem("usuarios",JSON.stringify(usuarios));
alert("Cuenta creada ðŸ’…");
mostrarLogin();
}

function login(){
let user=usuarios.find(u=>u.usuario===usuario.value&&u.clave===clave.value);
if(!user)return alert("Datos incorrectos");
sesion=user;
localStorage.setItem("sesion",JSON.stringify(sesion));
mostrarApp();
}

function entrarInvitado(){
sesion={usuario:"Invitado",rol:"cliente"};
mostrarApp();
}

function logout(){
localStorage.removeItem("sesion");
location.reload();
}

/* ======= APP ======= */
function mostrarApp(){
authView.classList.add("hidden");
appView.classList.remove("hidden");
saludo.textContent="Bienvenida "+sesion.usuario+" ðŸ’–";
generarCalendario();
if(sesion.rol==="admin"){
adminPanel.classList.remove("hidden");
mostrarReservasAdmin();
estadisticas();
}
}

/* ======= CALENDARIO ======= */
function generarCalendario(){
calendar.innerHTML="";
let aÃ±o=fechaActual.getFullYear();
let mes=fechaActual.getMonth();
let dias=new Date(aÃ±o,mes+1,0).getDate();
mesActual.textContent=fechaActual.toLocaleString('es-ES',{month:'long',year:'numeric'});

for(let i=1;i<=dias;i++){
let fecha=`${aÃ±o}-${String(mes+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
let div=document.createElement("div");
div.className="day";
div.textContent=i;
if(sesion.rol==="cliente"){
div.onclick=()=>abrirAgenda(fecha);
}
calendar.appendChild(div);
}
}

function abrirAgenda(fecha){
clientePanel.classList.remove("hidden");
clientePanel.innerHTML=`
<h3>Agendar para ${fecha}</h3>
<input type="text" id="nombreCliente" placeholder="Tu nombre">
<div class="horas">
<button class="small" onclick="reservar('${fecha}','10:00')">10:00</button>
<button class="small" onclick="reservar('${fecha}','12:00')">12:00</button>
<button class="small" onclick="reservar('${fecha}','15:00')">15:00</button>
</div>
`;
}

function reservar(fecha,hora){
let nombre=document.getElementById("nombreCliente").value||sesion.usuario;
reservas.push({cliente:nombre,fecha,hora,precio:precioBase});
localStorage.setItem("reservas",JSON.stringify(reservas));
alert("Reserva confirmada ðŸ’…");
}

/* ======= ADMIN ======= */
function mostrarReservasAdmin(){
listaAdmin.innerHTML="";
reservas.forEach((r,i)=>{
listaAdmin.innerHTML+=`
<li>${r.cliente} - ${r.fecha} ${r.hora} - $${r.precio}
<button class="admin-delete" onclick="eliminar(${i})">X</button>
</li>`;
});
}

function eliminar(i){
reservas.splice(i,1);
localStorage.setItem("reservas",JSON.stringify(reservas));
mostrarReservasAdmin();
estadisticas();
}

function estadisticas(){
let mes=String(fechaActual.getMonth()+1).padStart(2,'0');
let aÃ±o=fechaActual.getFullYear();
let reservasMes=reservas.filter(r=>r.fecha.startsWith(`${aÃ±o}-${mes}`));
let ingresos=reservasMes.reduce((a,b)=>a+b.precio,0);
estadisticas.innerHTML=`
<div class="stat-box">Reservas: ${reservasMes.length}</div>
<div class="stat-box">Ingresos simulados: $${ingresos.toLocaleString()}</div>
`;
}

/* ======= PDF ======= */
function exportarPDF(){
const { jsPDF } = window.jspdf;
let doc=new jsPDF();
doc.text("Valentina Nails - Demo Reservas",10,10);
let y=20;
reservas.forEach(r=>{
doc.text(`${r.cliente} - ${r.fecha} ${r.hora}`,10,y);
y+=10;
});
doc.save("demo-reservas.pdf");
}

</script>

</body>
</html>
