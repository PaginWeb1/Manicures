<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Valentina Nails | Agenda PRO</title>

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#fdf2f8,#fbcfe8);
}

/* HEADER */
.header{
background:#ec4899;
color:white;
padding:25px;
text-align:center;
}

/* CONTENEDOR */
.container{
max-width:1100px;
margin:auto;
padding:20px;
}

.card{
background:white;
padding:20px;
border-radius:20px;
box-shadow:0 10px 25px rgba(0,0,0,0.08);
margin-bottom:20px;
}

.topbar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:15px;
}

button{
padding:8px 12px;
border:none;
border-radius:10px;
background:#ec4899;
color:white;
cursor:pointer;
margin:3px;
}

button:hover{background:#db2777;}

input{
padding:8px;
border-radius:8px;
border:1px solid #ddd;
margin-bottom:8px;
}

/* CALENDARIO */
.calendar{
display:grid;
grid-template-columns:repeat(7,1fr);
gap:8px;
margin-top:10px;
}

.day{
padding:12px;
border-radius:10px;
text-align:center;
font-weight:bold;
cursor:pointer;
}

.disponible-dia{background:#bbf7d0;}
.parcial-dia{background:#fbcfe8;}
.lleno-dia{background:#f87171;color:white;}
.bloqueado-dia{background:#444;color:white;}
.inactivo{background:#eee;cursor:not-allowed;}

.horas{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:6px;
margin-top:10px;
}

.hora-btn{
padding:6px;
border-radius:8px;
border:none;
}

.disponible{background:#fbcfe8;}
.ocupado{background:#ddd;cursor:not-allowed;}

.hidden{display:none;}

.admin-delete{background:#ef4444;}
.admin-block{background:#444;}
.stat-box{
background:#fdf2f8;
padding:10px;
border-radius:10px;
margin-bottom:8px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginView" class="card" style="max-width:400px;margin:80px auto;">
<h2>Ingreso</h2>
<input type="text" id="usuario" placeholder="Usuario">
<input type="password" id="clave" placeholder="Contrase√±a">
<button onclick="login()">Ingresar</button>
<p>Cliente: cliente / 1234<br>Admin: admin / 1234</p>
</div>

<!-- APP -->
<div id="appView" class="hidden">

<div class="header">
<h1>Valentina Nails Studio</h1>
<p>Agenda Profesional Avanzada üíÖ</p>
</div>

<div class="container">

<div class="topbar">
<h3 id="rolTitulo"></h3>
<button onclick="logout()">Salir</button>
</div>

<!-- NAVEGADOR MES -->
<div class="card">
<div class="topbar">
<button onclick="cambiarMes(-1)">‚Üê</button>
<h3 id="mesActual"></h3>
<button onclick="cambiarMes(1)">‚Üí</button>
</div>
<div class="calendar" id="calendar"></div>
</div>

<!-- HORAS CLIENTE -->
<div id="clientePanel" class="card hidden">
<h3>Horas disponibles</h3>
<div class="horas" id="horasContainer"></div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden">

<div class="card">
<h3>Estad√≠sticas del mes</h3>
<div id="estadisticas"></div>
</div>

<div class="card">
<h3>Bloquear d√≠a completo</h3>
<input type="date" id="bloquearFecha">
<button class="admin-block" onclick="bloquearDia()">Bloquear D√≠a</button>
</div>

<div class="card">
<h3>Gesti√≥n Horarios</h3>
<input type="time" id="nuevaHora">
<button onclick="agregarHora()">Agregar Hora</button>
<ul id="listaHoras"></ul>
</div>

<div class="card">
<h3>Reservas</h3>
<ul id="listaAdmin"></ul>
</div>

</div>

</div>
</div>

<script>
const usuarios=[
{usuario:"cliente",clave:"1234",rol:"cliente"},
{usuario:"admin",clave:"1234",rol:"admin"}
];

let reservas=JSON.parse(localStorage.getItem("reservas"))||[];
let diasBloqueados=JSON.parse(localStorage.getItem("bloqueados"))||[];
let horasDisponibles=JSON.parse(localStorage.getItem("horas"))||
["10:00","11:00","12:00","14:00","15:00","16:00"];

let sesion=null;
let fechaActual=new Date();

function login(){
const u=document.getElementById("usuario").value;
const c=document.getElementById("clave").value;
const user=usuarios.find(x=>x.usuario===u&&x.clave===c);
if(!user){alert("Datos incorrectos");return;}
sesion=user;
document.getElementById("loginView").classList.add("hidden");
document.getElementById("appView").classList.remove("hidden");
document.getElementById("rolTitulo").textContent=
user.rol==="admin"?"Panel Administrador":"Panel Cliente";

generarCalendario();

if(user.rol==="admin"){
document.getElementById("adminPanel").classList.remove("hidden");
mostrarReservasAdmin();
mostrarHorasAdmin();
estadisticas();
}
}

function logout(){location.reload();}

/* CALENDARIO */
function generarCalendario(){
const calendar=document.getElementById("calendar");
calendar.innerHTML="";
const a√±o=fechaActual.getFullYear();
const mes=fechaActual.getMonth();
const dias=new Date(a√±o,mes+1,0).getDate();
document.getElementById("mesActual").textContent=
fechaActual.toLocaleString('es-ES',{month:'long',year:'numeric'});

for(let i=1;i<=dias;i++){
let fecha=`${a√±o}-${String(mes+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
let reservasDia=reservas.filter(r=>r.fecha===fecha).length;

let div=document.createElement("div");
div.textContent=i;
div.classList.add("day");

if(diasBloqueados.includes(fecha)){
div.classList.add("bloqueado-dia");
}else if(reservasDia===0){
div.classList.add("disponible-dia");
}else if(reservasDia<horasDisponibles.length){
div.classList.add("parcial-dia");
}else{
div.classList.add("lleno-dia");
}

if(sesion && sesion.rol==="cliente" && !diasBloqueados.includes(fecha)){
div.onclick=()=>mostrarHoras(fecha);
}

calendar.appendChild(div);
}
}

function cambiarMes(valor){
fechaActual.setMonth(fechaActual.getMonth()+valor);
generarCalendario();
if(sesion && sesion.rol==="admin") estadisticas();
}

/* CLIENTE HORAS */
function mostrarHoras(fecha){
document.getElementById("clientePanel").classList.remove("hidden");
const container=document.getElementById("horasContainer");
container.innerHTML="";
horasDisponibles.forEach(hora=>{
let ocupado=reservas.find(r=>r.fecha===fecha&&r.hora===hora);
let btn=document.createElement("button");
btn.textContent=hora;
btn.classList.add("hora-btn");
if(ocupado){
btn.classList.add("ocupado");
btn.disabled=true;
}else{
btn.classList.add("disponible");
btn.onclick=()=>reservar(fecha,hora);
}
container.appendChild(btn);
});
}

function reservar(fecha,hora){
reservas.push({cliente:sesion.usuario,fecha,hora});
localStorage.setItem("reservas",JSON.stringify(reservas));
alert("Reserva confirmada üíÖ");
generarCalendario();
}

/* ADMIN */
function mostrarReservasAdmin(){
const lista=document.getElementById("listaAdmin");
lista.innerHTML="";
reservas.forEach((r,i)=>{
const li=document.createElement("li");
li.innerHTML=`${r.cliente} - ${r.fecha} ${r.hora}
<br><button class="admin-delete" onclick="eliminar(${i})">Eliminar</button>`;
lista.appendChild(li);
});
}

function eliminar(i){
reservas.splice(i,1);
localStorage.setItem("reservas",JSON.stringify(reservas));
mostrarReservasAdmin();
generarCalendario();
estadisticas();
}

function bloquearDia(){
const fecha=document.getElementById("bloquearFecha").value;
if(!fecha)return;
diasBloqueados.push(fecha);
localStorage.setItem("bloqueados",JSON.stringify(diasBloqueados));
generarCalendario();
}

function agregarHora(){
const hora=document.getElementById("nuevaHora").value;
if(!hora)return;
horasDisponibles.push(hora);
localStorage.setItem("horas",JSON.stringify(horasDisponibles));
mostrarHorasAdmin();
generarCalendario();
}

function mostrarHorasAdmin(){
const lista=document.getElementById("listaHoras");
lista.innerHTML="";
horasDisponibles.forEach((h,i)=>{
const li=document.createElement("li");
li.innerHTML=`${h}
<button class="admin-delete" onclick="eliminarHora(${i})">X</button>`;
lista.appendChild(li);
});
}

function eliminarHora(i){
horasDisponibles.splice(i,1);
localStorage.setItem("horas",JSON.stringify(horasDisponibles));
mostrarHorasAdmin();
generarCalendario();
}

/* ESTADISTICAS */
function estadisticas(){
const a√±o=fechaActual.getFullYear();
const mes=fechaActual.getMonth()+1;
let total=reservas.filter(r=>r.fecha.startsWith(`${a√±o}-${String(mes).padStart(2,'0')}`)).length;
document.getElementById("estadisticas").innerHTML=
`<div class="stat-box">Total reservas del mes: <strong>${total}</strong></div>`;
}
</script>

</body>
</html>
